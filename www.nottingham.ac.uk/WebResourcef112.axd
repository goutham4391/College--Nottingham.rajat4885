jQuery.fn.popupwindow = function (a) { var b = a || {}; return this.each(function (a) { var c, d, e, f, g, h; e = (jQuery(this).attr("rel") || "").split(","); c = { height: 600, width: 600, toolbar: 0, scrollbars: 0, status: 0, resizable: 1, left: 0, top: 0, center: 0, createnew: 1, location: 0, menubar: 0, onUnload: null }; if (e.length == 1 && e[0].split(":").length == 1) { g = e[0]; if (typeof b[g] != "undefined") { c = jQuery.extend(c, b[g]) } } else { for (var i = 0; i < e.length; i++) { f = e[i].split(":"); if (typeof c[f[0]] != "undefined" && f.length == 2) { c[f[0]] = f[1] } } } if (c.center == 1) { c.top = (screen.height - (c.height + 110)) / 2; c.left = (screen.width - c.width) / 2 } d = "location=" + c.location + ",menubar=" + c.menubar + ",height=" + c.height + ",width=" + c.width + ",toolbar=" + c.toolbar + ",scrollbars=" + c.scrollbars + ",status=" + c.status + ",resizable=" + c.resizable + ",left=" + c.left + ",screenX=" + c.left + ",top=" + c.top + ",screenY=" + c.top; jQuery(this).bind("click", function () { var b = c.createnew ? "PopUpWindow" + a : "PopUpWindow"; h = window.open(this.href, b, d); if (c.onUnload) { unloadInterval = setInterval(function () { if (!h || h.closed) { clearInterval(unloadInterval); c.onUnload.call($(this)) } }, 500) } h.focus(); return false }) }) }